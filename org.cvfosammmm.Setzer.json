{
    "app-id": "org.cvfosammmm.Setzer",
    "runtime": "org.gnome.Platform",
    "runtime-version": "42",
    "sdk": "org.gnome.Sdk",
    "sdk-extensions": ["org.freedesktop.Sdk.Extension.texlive"],
    "command": "setzer",
    "finish-args": [
        "--share=ipc",
        "--socket=x11",
        "--socket=fallback-x11",
        "--socket=wayland",
        "--socket=pulseaudio",
        "--filesystem=host",
        "--filesystem=xdg-run/dconf",
        "--filesystem=~/.config/dconf:ro",
        "--env=PATH=/app/bin:/usr/bin:/app/bin/x86_64-linux",
        "--env=TEXMFCACHE=$XDG_CACHE_HOME",
        "--env=LC_ALL=C",
        "--env=TEXINPUTS=.:~/texmf/:",
        "--talk-name=ca.desrt.dconf",
        "--env=DCONF_USER_CONFIG_DIR=.config/dconf"
    ],
    "modules": [
        {
            "name": "texlive",
            "buildsystem": "simple",
            "build-commands": [
                "/usr/lib/sdk/texlive/install.sh"
            ]
        },
        {
            "name": "gspell",
            "cleanup": [
                "/bin"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/gspell/1.9/gspell-1.9.1.tar.xz",
                    "sha256": "dcbb769dfdde8e3c0a8ed3102ce7e661abbf7ddf85df08b29915e92cd723abdd"
                }
            ]
        },
        {
            "name": "boost",
            "buildsystem": "simple",
            "build-commands": [
                "mkdir -p ${FLATPAK_DEST}/include",
                "mv boost ${FLATPAK_DEST}/include"
            ],
            "cleanup": [
                "/include"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://boostorg.jfrog.io/artifactory/main/release/1.81.0/source/boost_1_81_0.tar.bz2",
                    "sha256": "71feeed900fbccca04a3b4f2f84a7c217186f28a940ed8b7ed4725986baf99fa"
                }
            ]
        },
        {
            "name": "popplerdata",
            "no-autogen": true,
            "make-install-args": [
                "prefix=/app"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://poppler.freedesktop.org/poppler-data-0.4.11.tar.gz",
                    "sha256": "2cec05cd1bb03af98a8b06a1e22f6e6e1a65b1e2f3816cb3069bb0874825f08c"
                }
            ]
        },
        {
            "name": "poppler",
            "buildsystem": "cmake-ninja",
            "config-opts": [
                "-DCMAKE_BUILD_TYPE=release",
                "-DENABLE_QT5:BOOL=true",
                "-DCMAKE_INSTALL_LIBDIR:PATH=/app/lib"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://poppler.freedesktop.org/poppler-22.12.0.tar.xz",
                    "sha256": "d9aa9cacdfbd0f8e98fc2b3bb008e645597ed480685757c3e7bc74b4278d15c0"
                }
            ]
        },
        {
            "name": "perl",
            "no-autogen": true,
            "config-opts": ["-des", "-Duseshrplib"],
            "build-options": {"cflags": "-fPIC", "ldflags": "-fpic", "no-debuginfo": true},
            "cleanup": ["/man", "*.pod", "*.h"],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://www.cpan.org/src/5.0/perl-5.36.0.tar.gz",
                    "sha256": "e26085af8ac396f62add8a533c3a0ea8c8497d836f0689347ac5abd7b7a4e00a"
                },
                {
                    "type": "script",
                    "dest-filename": "configure",
                    "commands": ["exec ./configure.gnu $@"]
                }
            ]
        },
        {
            "name": "python3-pycairo",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"pycairo\""
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/69/ca/9e9fa2e8be0876a9bbf046a1be7ee33e61d4fdfbd1fd25c76c1bdfddf8c4/pycairo-1.23.0.tar.gz",
                    "sha256": "9b61ac818723adc04367301317eb2e814a83522f07bbd1f409af0dada463c44c"
                }
            ]
        },
        {
            "name": "python3-pexpect",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --verbose --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"pexpect\" --no-build-isolation"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/39/7b/88dbb785881c28a102619d46423cb853b46dbccc70d3ac362d99773a78ce/pexpect-4.8.0-py2.py3-none-any.whl",
                    "sha256": "0b48a55dcb3c05f3329815901ea4fc1537514d6ba867a152b581d69ae3710937"
                },
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/22/a6/858897256d0deac81a172289110f31629fc4cee19b6f01283303e18c8db3/ptyprocess-0.7.0-py2.py3-none-any.whl",
                    "sha256": "4b41f3967fce3af57cc7e94b888626c18bf37a083e3651ca8feeb66d492fef35"
                }
            ]
        },
        {
            "name": "setzer",
            "buildsystem": "meson",
            "config-opts": [
                "--buildtype=release"
            ],
            "sources": [
                {
                    "type": "dir",
                    "path": "."
                }
            ]
        }
    ]
}
